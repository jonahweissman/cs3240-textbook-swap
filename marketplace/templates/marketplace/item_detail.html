{% extends 'marketplace/base.html' %}

{% block content %}
<style>
    body{
    background-image:url('https://www.designbolts.com/wp-content/uploads/2012/11/Black-wood-photoshop-pattern-for-website-background.jpg')
    }
    </style>
<h1 class="text-white">{{ object.item_name }}</h1>
<h3 class="text-white">{{ object.item_seller_name }}</h3>
<p class="text-white">{{ object.item_description }}</p>

{% if not user.is_authenticated %}
<form action="{% url 'marketplace:login' %}" class="form-inline my-2 my-lg-0">
  <input type="hidden" name="next" value="{{ request.path }}" />
  <input type="submit" class="btn btn-info btn-lg" value="Contact seller" />
</form>
{% elif request.user == object.item_seller_name.user or user_has_buyer_conversation %}
<a href="{% url 'marketplace:message_list' object.pk %}">
  <button type="button" class="btn btn-info btn-lg">View messages</button>
</a>
{% else %}
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#contact">Contact seller</button>
{% endif %}

<div id="contact" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <h3>Contact</h3>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form action="{% url 'marketplace:send_intro' %}" method='POST' class="form-inline my-2 my-lg-0">
          {% csrf_token %}
          <input type="hidden" name="item" value="{{ object.pk }}">
          <div class="container">
            <label for="text">
              Send {{ item.item_seller_name }} a message telling them you're interested in buying "{{ item.item_name }}" and when you're available to make the exchange!
            </label>
            <div class="row">
              <textarea id="text" name="message"></textarea>
            </div>
            <div class="row">
              <button class="btn btn-outline-dark my-2 my-sm-0" type="submit">
                send message
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
  
{% endblock %}
